WEBVTT
Kind: captions
Language: zh-CN

00:00:00.240 --> 00:00:02.540
我刚刚提到 位移函数可能很有帮助

00:00:02.540 --> 00:00:05.850
那我们首先看一下它的文档

00:00:05.850 --> 00:00:09.560
文档中表示 该函数会按照指定的周期数移动索引值

00:00:09.560 --> 00:00:13.260
同时还可选择时间频率

00:00:13.260 --> 00:00:15.440
我觉得这些东西晦涩难懂

00:00:15.440 --> 00:00:18.360
所以 我要直接试一下函数 以了解它的用处

00:00:18.360 --> 00:00:19.930
但有一点我明白了

00:00:19.930 --> 00:00:23.360
那就是位移函数需要一个名为周期的参数

00:00:23.360 --> 00:00:26.090
它表示移动周期的整数

00:00:27.250 --> 00:00:30.540
我现在要试着移动示例出入站人数的DataFrame

00:00:30.540 --> 00:00:34.530
首先 我要移动 1 个周期

00:00:34.530 --> 00:00:35.450
试一下之后发现

00:00:35.450 --> 00:00:39.520
输出DataFrame的第一行含有 NaN

00:00:39.520 --> 00:00:43.460
第二行则对应原DataFrame的第一行

00:00:43.460 --> 00:00:47.010
第三行对应原DataFrame的第二行

00:00:47.010 --> 00:00:50.870
为了确保我能完全掌握它 我用参数 2 再次运行这个函数

00:00:50.870 --> 00:00:53.890
这一次 前两行都是 NaN

00:00:53.890 --> 00:00:57.140
输出DataFrame的第三行

00:00:57.140 --> 00:00:58.180
对应原DataFrame的第一行

00:00:59.300 --> 00:01:03.090
为了计算每小时的出入站人数

00:01:03.090 --> 00:01:06.760
我要用DataFrame中的每个值减去前一行的值

00:01:06.760 --> 00:01:11.520
因此 我要用向量运算和位移函数

00:01:11.520 --> 00:01:15.040
这里 我把DataFrame中的每个值

00:01:15.040 --> 00:01:19.070
减去位移 1 的DataFrame这样我就得到了前一行

00:01:19.070 --> 00:01:21.450
当我在示例DataFrame中运行这个函数时

00:01:21.450 --> 00:01:24.420
我得到了以下输出结果 它们看似合理

00:01:24.420 --> 00:01:27.370
比较奇怪的是 第一行含有 NaN

00:01:27.370 --> 00:01:29.710
但仔细思考一下 这也说得通

00:01:29.710 --> 00:01:33.410
因为 就DataFrame中的第一行而言 你不知道每小时的出入站人数

00:01:33.410 --> 00:01:37.130
因为没有前一行来比较

00:01:37.130 --> 00:01:40.730
所以 忽略这一行或用 0 来代替这些值比较合理

