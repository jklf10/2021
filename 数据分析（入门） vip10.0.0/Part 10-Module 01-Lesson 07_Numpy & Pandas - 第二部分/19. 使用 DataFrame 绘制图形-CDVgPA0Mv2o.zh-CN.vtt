WEBVTT
Kind: captions
Language: zh-CN

00:00:00.270 --> 00:00:03.390
我决定绘制地铁站的散点图

00:00:03.390 --> 00:00:06.520
并将纬度和经度分别设为 x 轴和 y 轴 将客流量设为气泡大小

00:00:07.620 --> 00:00:11.920
首先 我要按经纬度对数据进行分组

00:00:11.920 --> 00:00:15.620
我还想计算出各车站的平均客流量

00:00:15.620 --> 00:00:19.270
我先看一下前几行 以确保它运算正常

00:00:19.270 --> 00:00:22.080
结果看起来不错 接下来 

00:00:22.080 --> 00:00:25.760
我要读取经纬度 以绘制散点图

00:00:25.760 --> 00:00:30.480
但如果我直接在代码末尾添加纬度 就会得到错误信息

00:00:30.480 --> 00:00:32.130
这是因为经纬度

00:00:32.130 --> 00:00:34.970
已不是 DataFrame 的列

00:00:34.970 --> 00:00:39.170
它们变成了 DataFrame 的行索引值

00:00:39.170 --> 00:00:44.070
我可以通过在 groupby 函数中输入 as_index=False 来解决这个问题

00:00:44.070 --> 00:00:46.260
现在 我可以只获取纬度

00:00:46.260 --> 00:00:47.740
或用同样的方法获取经度

00:00:48.740 --> 00:00:51.840
接下来 我要添加 %pylab inline 和 import

00:00:53.010 --> 00:00:56.490
然后 将纬度作为 x 坐标 

00:00:56.490 --> 00:00:58.880
经度作为 y 坐标 创建散点图

00:00:58.880 --> 00:01:00.020
我们可以看到

00:01:01.410 --> 00:01:04.670
它成功创建了所有地铁站的散点图

00:01:04.670 --> 00:01:08.270
但我还没有根据客流量设置气泡大小

00:01:08.270 --> 00:01:11.040
我不太确定如何完成这一步

00:01:11.040 --> 00:01:13.040
所以 我决定在 Google 上搜索 matplotlib 散点图气泡大小

00:01:14.750 --> 00:01:18.670
第一个搜索结果与绘图标注大小有关 看起来很有用

00:01:18.670 --> 00:01:20.640
看一下示例代码中的第一个答案

00:01:20.640 --> 00:01:24.510
我好像可以在散点函数中添加参数 S 

00:01:24.510 --> 00:01:26.295
这个参数可以是数组

00:01:26.295 --> 00:01:29.345
这样我就可以分别控制每个气泡的大小了

00:01:29.345 --> 00:01:32.235
现在 我要试着将参数 S 添加到代码中

00:01:32.235 --> 00:01:36.155
给予它 ENTRIESn_hourly 列 以确定各气泡的大小

00:01:36.155 --> 00:01:39.105
运行后我发现 代码是有效的

00:01:39.105 --> 00:01:42.985
但很多气泡面积过大 使散点图很难理解

00:01:42.985 --> 00:01:46.204
为解决这个问题 我要设定一个名为 scaled_entries 的新变量

00:01:47.280 --> 00:01:50.150
为了缩放每小时的入站人数数据

00:01:50.150 --> 00:01:52.070
我要用标准偏差除以每个值

00:01:52.070 --> 00:01:55.080
接下来 我要将散点图函数的大小参数

00:01:55.080 --> 00:01:57.980
改变为缩放后的出入站人数

00:01:57.980 --> 00:02:01.460
再次运行这行代码后 它的结果看起来更为合理

00:02:01.460 --> 00:02:03.700
现在的气泡有点小了

00:02:03.700 --> 00:02:05.970
所有我可以改变一下缩放的比例系数

00:02:05.970 --> 00:02:09.570
但我们已经能看出 

00:02:09.570 --> 00:02:10.710
纽约部分地区的客流量较高

00:02:10.710 --> 00:02:13.180
它们大概位于下方和上面的这里

