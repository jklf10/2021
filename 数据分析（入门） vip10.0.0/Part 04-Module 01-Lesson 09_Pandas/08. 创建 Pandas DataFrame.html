<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>创建 Pandas DataFrame</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>Pandas</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. 课程讲师.html">01. 课程讲师</a>
    </li>
    <li class="">
      <a href="02. Pandas 简介.html">02. Pandas 简介</a>
    </li>
    <li class="">
      <a href="03. 为何要使用 Pandas？.html">03. 为何要使用 Pandas？</a>
    </li>
    <li class="">
      <a href="04. 创建 Pandas Series.html">04. 创建 Pandas Series</a>
    </li>
    <li class="">
      <a href="05. 访问和删除 Pandas Series 中的元素.html">05. 访问和删除 Pandas Series 中的元素</a>
    </li>
    <li class="">
      <a href="06. 对 Pandas Series 执行算术运算.html">06. 对 Pandas Series 执行算术运算</a>
    </li>
    <li class="">
      <a href="07. 操纵 Series.html">07. 操纵 Series</a>
    </li>
    <li class="">
      <a href="08. 创建 Pandas DataFrame.html">08. 创建 Pandas DataFrame</a>
    </li>
    <li class="">
      <a href="09. 访问 Pandas DataFrame 中的元素.html">09. 访问 Pandas DataFrame 中的元素</a>
    </li>
    <li class="">
      <a href="10. 处理 NaN.html">10. 处理 NaN</a>
    </li>
    <li class="">
      <a href="11. 操纵 DataFrame.html">11. 操纵 DataFrame</a>
    </li>
    <li class="">
      <a href="12. 将数据加载到 Pandas DataFrame 中.html">12. 将数据加载到 Pandas DataFrame 中</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">08. 创建 Pandas DataFrame</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3></h3>
  <div>
  <h1 id="创建-pandas-dataframe">创建 Pandas DataFrame</h1>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Pandas 4 V1</p></h3>
  <video controls>
  <source src="08. Pandas 4 V1-eMHUn9v9dds.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="08. Pandas 4 V1-eMHUn9v9dds.en.vtt" label="en">
  <track default="false" kind="subtitles" srclang="BR" src="08. Pandas 4 V1-eMHUn9v9dds.pt-BR.vtt" label="BR">
  <track default="false" kind="subtitles" srclang="CN" src="08. Pandas 4 V1-eMHUn9v9dds.zh-CN.vtt" label="CN">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>Pandas DataFrames 是具有带标签的行和列的二维数据结构，可以存储很多类型的数据。如果你熟悉 Excel 的话，可以将 Pandas DataFrames 看做类似于电子表格。在接下来的课程中，我们将开始学习如何手动地通过字典创建 Pandas DataFrame，稍后，我们将学习如何将数据文件中的数据加载到 DataFrame 中。</p>
<p>首先，我们将使用 Pandas Series 字典手动创建一个 DataFrame。第一步是创建 Pandas Series 字典。字典创建完毕后，我们可以将该字典传递给 <code>pd.DataFrame()</code> 函数。</p>
<p>我们将创建一个字典，其中包含 Alice 和 Bob 从在线商店中购买的商品。该 Pandas Series 将使用所买商品的价格作为<em>数据</em>，所买商品作为<em>索引</em>标签。我们来看看如何编写代码：</p>
<pre><code># We import Pandas as pd into Python
import pandas as pd

# We create a dictionary of Pandas Series 
items = {'Bob' : pd.Series(data = [245, 25, 55], index = ['bike', 'pants', 'watch']),
         'Alice' : pd.Series(data = [40, 110, 500, 45], index = ['book', 'glasses', 'bike', 'pants'])}

# We print the type of items to see that it is a dictionary
print(type(items))</code></pre>
<blockquote>
  <p>class 'dict'</p>
</blockquote>
<p>字典已经创建完毕，我们可以通过将其传递给 <code>pd.DataFrame()</code> 函数，创建 DataFrame。我们将创建一个可以表示多位用户的购物车的 DataFrame，在此例中只有两位用户，即 Alice 和 Bob。</p>
<pre><code># We create a Pandas DataFrame by passing it a dictionary of Pandas Series
shopping_carts = pd.DataFrame(items)

# We display the DataFrame
shopping_carts</code></pre>
<blockquote>
  <table>
  <thead>
  <tr>
  <th id=""></th>
  <th id="**_alice**" style="text-align:center;">** Alice**</th>
  <th id="**bob**" style="text-align:center;"><strong>Bob</strong></th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><strong>bike</strong></td>
  <td style="text-align:center;">500.0</td>
  <td style="text-align:center;">245.0</td>
  </tr>
  <tr>
  <td><strong>book</strong></td>
  <td style="text-align:center;">40.0</td>
  <td style="text-align:center;">NaN</td>
  </tr>
  <tr>
  <td><strong>glasses</strong></td>
  <td style="text-align:center;">110.0</td>
  <td style="text-align:center;">NaN</td>
  </tr>
  <tr>
  <td><strong>pants</strong></td>
  <td style="text-align:center;">45.0</td>
  <td style="text-align:center;">25.0</td>
  </tr>
  <tr>
  <td><strong>watch</strong></td>
  <td style="text-align:center;">NaN</td>
  <td style="text-align:center;">55.0</td>
  </tr>
  </tbody>
  </table>
</blockquote>
<p>有几个事项需要注意。我们发现 DataFrame 以表格形式显示，和 Excel 电子表格很像，行和列的标签以<strong>粗体</strong>形式显示。此外注意，DataFrame 的行标签根据构建字典所用的两个 Pandas Series 的索引标签创建而成。DataFrame 的列标签来自字典的<em>键</em>。另一个注意事项是，列按照字母顺序排序，而不是字典中的顺序。稍后我们将发现，当我们从数据文件中向 DataFrame 加载数据时，不会发生这种情况。最后要注意的是，我们发现该 DataFrame 中出现了一些 <code>NaN</code> 值。<code>NaN</code> 是指<em>非数字</em>，Pandas 通过这种方式表示该行和列索引没有值。例如，如果我们查看 Alice 列，我们发现手表索引的值是 <code>NaN</code>。你可以通过查看一开始创建的字典，了解为何是这种情况。可以清晰地看出，Alice 手表标签没有条目。因此，在创建 DataFrame 时，如果特定行索引的特定列没有值，Pandas 将用 <code>NaN</code> 值填充。如果要将此数据馈送到机器学习算法中，我们首先需要删掉这些 <code>NaN</code> 值。在后面的课程中，我们将学习如何处理 <code>NaN</code> 值以及如何清理数据。暂时先将这些值留在我们的 DataFrame 中。</p>
<p>在上述示例中，我们使用具有定义清晰的索引的 Pandas Series 字典创建了 Pandas DataFrame。如果我们不向 Pandas Series 提供索引标签，Pandas 在创建 DataFrame 时将使用数字行索引。我们来看一个示例：</p>
<pre><code># We create a dictionary of Pandas Series without indexes
data = {'Bob' : pd.Series([245, 25, 55]),
        'Alice' : pd.Series([40, 110, 500, 45])}

# We create a DataFrame
df = pd.DataFrame(data)

# We display the DataFrame
df</code></pre>
<blockquote>
  <table>
  <thead>
  <tr>
  <th id=""></th>
  <th id="**_alice**" style="text-align:center;">** Alice**</th>
  <th id="**bob**" style="text-align:center;"><strong>Bob</strong></th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><strong>0</strong></td>
  <td style="text-align:center;">40</td>
  <td style="text-align:center;">245.0</td>
  </tr>
  <tr>
  <td><strong>1</strong></td>
  <td style="text-align:center;">110</td>
  <td style="text-align:center;">25.0</td>
  </tr>
  <tr>
  <td><strong>2</strong></td>
  <td style="text-align:center;">500</td>
  <td style="text-align:center;">55.0</td>
  </tr>
  <tr>
  <td><strong>3</strong></td>
  <td style="text-align:center;">45</td>
  <td style="text-align:center;">NaN</td>
  </tr>
  </tbody>
  </table>
</blockquote>
<p>可以看出，Pandas DataFrame 的行索引从 0 开始，就像 NumPy ndarray 的索引一样。</p>
<p>现在，和 Pandas Series 一样，我们也可以使用属性从 DataFrame 中提取信息。我们输出 <code>shopping_carts</code> DataFrame 中的一些信息</p>
<pre><code># We print some information about shopping_carts
print('shopping_carts has shape:', shopping_carts.shape)
print('shopping_carts has dimension:', shopping_carts.ndim)
print('shopping_carts has a total of:', shopping_carts.size, 'elements')
print()
print('The data in shopping_carts is:\n', shopping_carts.values)
print()
print('The row index in shopping_carts is:', shopping_carts.index)
print()
print('The column index in shopping_carts is:', shopping_carts.columns)</code></pre>
<blockquote>
  <p>shopping_carts has shape: (5, 2)  <br />
  shopping_carts has dimension: 2  <br />
  shopping_carts has a total of: 10 elements</p>
</blockquote>
<blockquote>
  <p>The data in shopping_carts is:  <br />
  [[ &nbsp;&nbsp; 500.  &nbsp;&nbsp; 245.]  <br />
  [  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 40. &nbsp;&nbsp;&nbsp; nan]  <br />
  [ &nbsp;&nbsp;&nbsp; 110. &nbsp;&nbsp;&nbsp; nan]  <br />
  [  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 45. &nbsp;&nbsp;&nbsp;&nbsp; 25.]  <br />
  [  &nbsp;&nbsp;&nbsp; nan &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 55.]]</p>
</blockquote>
<blockquote>
  <p>The row index in shopping_carts is: Index(['bike', 'book', 'glasses', 'pants', 'watch'], dtype='object')</p>
</blockquote>
<blockquote>
  <p>The column index in shopping_carts is: Index(['Alice', 'Bob'], dtype='object')</p>
</blockquote>
<p>在 <code>shopping_carts</code> DataFrame 时，我们将整个字典传递给了 <code>pd.DataFrame()</code> 函数。但是，有时候你可能只对一部分数据感兴趣。在 Pandas 中，我们可以通过关键字 <code>columns</code> 和 <code>index</code> 选择要将哪些数据放入 DataFrame 中。我们来看一些示例：</p>
<pre><code># We Create a DataFrame that only has Bob's data
bob_shopping_cart = pd.DataFrame(items, columns=['Bob'])

# We display bob_shopping_cart
bob_shopping_cart</code></pre>
<blockquote>
  <p>|    |      <strong>Bob</strong> |<br />
  |----------|:-------------:|:------:|<br />
  |<strong>bike</strong> |245  |<br />
  |<strong>pants</strong> |25  |<br />
  |<strong>watch</strong>|55  |</p>
</blockquote>
<pre><code># We Create a DataFrame that only has selected items for both Alice and Bob
sel_shopping_cart = pd.DataFrame(items, index = ['pants', 'book'])

# We display sel_shopping_cart
sel_shopping_cart</code></pre>
<blockquote>
  <table>
  <thead>
  <tr>
  <th id=""></th>
  <th id="**_alice**" style="text-align:center;">** Alice**</th>
  <th id="**bob**" style="text-align:center;"><strong>Bob</strong></th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><strong>pants</strong></td>
  <td style="text-align:center;">45</td>
  <td style="text-align:center;">25.0</td>
  </tr>
  <tr>
  <td><strong>book</strong></td>
  <td style="text-align:center;">40</td>
  <td style="text-align:center;">NaN</td>
  </tr>
  </tbody>
  </table>
</blockquote>
<pre><code># We Create a DataFrame that only has selected items for Alice
alice_sel_shopping_cart = pd.DataFrame(items, index = ['glasses', 'bike'], columns = ['Alice'])

# We display alice_sel_shopping_cart
alice_sel_shopping_cart</code></pre>
<blockquote>
  <p>|    |      <strong>Alice</strong> |<br />
  |----------|:-------------:|:------:|<br />
  |<strong>glasses</strong> |110  |<br />
  |<strong>bike</strong> |500  |</p>
</blockquote>
<p>你还可以使用列表（数组）字典手动地创建 DataFrame。流程和之前一样，首先创建一个字典，然后将该字典传递给 <code>pd.DataFrame()</code> 函数。但是在这种情况下，字典中的所有列表（数组）长度必须一样。我们来看一个示例：</p>
<pre><code># We create a dictionary of lists (arrays)
data = {'Integers' : [1,2,3],
        'Floats' : [4.5, 8.2, 9.6]}

# We create a DataFrame 
df = pd.DataFrame(data)

# We display the DataFrame
df</code></pre>
<blockquote>
  <table>
  <thead>
  <tr>
  <th id=""></th>
  <th id="**_floats**" style="text-align:center;">** Floats**</th>
  <th id="**integers**" style="text-align:center;"><strong>Integers</strong></th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><strong>0</strong></td>
  <td style="text-align:center;">4.5</td>
  <td style="text-align:center;">1</td>
  </tr>
  <tr>
  <td><strong>1</strong></td>
  <td style="text-align:center;">8.2</td>
  <td style="text-align:center;">2</td>
  </tr>
  <tr>
  <td><strong>2</strong></td>
  <td style="text-align:center;">9.6</td>
  <td style="text-align:center;">3</td>
  </tr>
  </tbody>
  </table>
</blockquote>
<p>注意，因为我们创建的 <code>data</code> 字典没有标签索引，因此 Pandas 在创建 DataFrame 时自动使用数字行索引。但是，我们可以通过在 <code>pd.DataFrame()</code> 函数中使用关键字 <code>index</code>，为行索引添加标签。我们来看一个示例：</p>
<pre><code># We create a dictionary of lists (arrays)
data = {'Integers' : [1,2,3],
        'Floats' : [4.5, 8.2, 9.6]}

# We create a DataFrame and provide the row index
df = pd.DataFrame(data, index = ['label 1', 'label 2', 'label 3'])

# We display the DataFrame
df</code></pre>
<blockquote>
  <table>
  <thead>
  <tr>
  <th id=""></th>
  <th id="**_floats**" style="text-align:center;">** Floats**</th>
  <th id="**integers**" style="text-align:center;"><strong>Integers</strong></th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><strong>label 1</strong></td>
  <td style="text-align:center;">4.5</td>
  <td style="text-align:center;">1</td>
  </tr>
  <tr>
  <td><strong>label 2</strong></td>
  <td style="text-align:center;">8.2</td>
  <td style="text-align:center;">2</td>
  </tr>
  <tr>
  <td><strong>label 3</strong></td>
  <td style="text-align:center;">9.6</td>
  <td style="text-align:center;">3</td>
  </tr>
  </tbody>
  </table>
</blockquote>
<p>手动创建 Pandas DataFrame 的最后一种方式是使用 Python 字典列表。流程和之前一样，我们先创建字典，然后将该字典传递给 <code>pd.DataFrame()</code> 函数。</p>
<pre><code># We create a list of Python dictionaries
items2 = [{'bikes': 20, 'pants': 30, 'watches': 35}, 
          {'watches': 10, 'glasses': 50, 'bikes': 15, 'pants':5}]

# We create a DataFrame 
store_items = pd.DataFrame(items2)

# We display the DataFrame
store_items</code></pre>
<blockquote>
  <table>
  <thead>
  <tr>
  <th id=""></th>
  <th id="**_bikes**" style="text-align:center;">** bikes**</th>
  <th id="**glasses**" style="text-align:center;"><strong>glasses</strong></th>
  <th id="**pants**" style="text-align:center;"><strong>pants</strong></th>
  <th id="**watches**" style="text-align:center;"><strong>watches</strong></th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><strong>0</strong></td>
  <td style="text-align:center;">20</td>
  <td style="text-align:center;">NaN</td>
  <td style="text-align:center;">30</td>
  <td style="text-align:center;">35</td>
  </tr>
  <tr>
  <td><strong>1</strong></td>
  <td style="text-align:center;">15</td>
  <td style="text-align:center;">50.0</td>
  <td style="text-align:center;">5</td>
  <td style="text-align:center;">10</td>
  </tr>
  </tbody>
  </table>
</blockquote>
<p>同样注意，因为我们创建的 <code>items2</code> 字典没有标签索引，因此 Pandas 在创建 DataFrame 时自动使用数字行索引。和之前一样，我们可以通过在 <code>pd.DataFrame()</code> 函数中使用关键字 <code>index</code>，为行索引添加标签。假设我们将使用该 DataFrame 存储某个商店的商品库存数量。我们将行索引的标签设为 <strong>store 1</strong> 和 <strong>store 2</strong>。</p>
<pre><code># We create a list of Python dictionaries
items2 = [{'bikes': 20, 'pants': 30, 'watches': 35}, 
          {'watches': 10, 'glasses': 50, 'bikes': 15, 'pants':5}]

# We create a DataFrame  and provide the row index
store_items = pd.DataFrame(items2, index = ['store 1', 'store 2'])

# We display the DataFrame
store_items</code></pre>
<blockquote>
  <table>
  <thead>
  <tr>
  <th id=""></th>
  <th id="**_bikes**" style="text-align:center;">** bikes**</th>
  <th id="**glasses**" style="text-align:center;"><strong>glasses</strong></th>
  <th id="**pants**" style="text-align:center;"><strong>pants</strong></th>
  <th id="**watches**" style="text-align:center;"><strong>watches</strong></th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><strong>store 1</strong></td>
  <td style="text-align:center;">20</td>
  <td style="text-align:center;">NaN</td>
  <td style="text-align:center;">30</td>
  <td style="text-align:center;">35</td>
  </tr>
  <tr>
  <td><strong>store 2</strong></td>
  <td style="text-align:center;">15</td>
  <td style="text-align:center;">50.0</td>
  <td style="text-align:center;">5</td>
  <td style="text-align:center;">10</td>
  </tr>
  </tbody>
  </table>
</blockquote>
</div>

</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="09. 访问 Pandas DataFrame 中的元素.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('08. 创建 Pandas DataFrame')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
